// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_MIGRATIONS")
}

model User {
  id            String       @default(cuid()) @id
  name          String?
  email         String?   @unique
  createdAt     DateTime  @default(now()) @map(name: "created_at")
  updatedAt     DateTime  @updatedAt @map(name: "updated_at")
  @@map(name: "users")
}

model Client {
  id                  String     @default(cuid()) @id
  documentType        DocumentType @default(NIF) @map(name: "document_type")
  documentNumber      String @map(name: "document_number")
  documentNationality String @map(name: "document_nationality")
  nationality         String @default("ESPAÑOLA")
  sex                 Sex?
  streetType          String? @map(name: "street_type")
  street              String
  streetNumber        String @map(name: "street_number")
  postalCode          String @map(name: "postal_code")
  city                String
  province            String
  country             String @default("ESPAÑA")
  phoneNumber         String @map(name: "phone_number")
  email               String?
  createdAt           DateTime  @default(now()) @map(name: "created_at")
  updatedAt           DateTime?  @updatedAt @map(name: "updated_at")
  orders              Order[]
  @@map(name: "clients")
}

model Order {
  id                  String       @default(cuid()) @id
  orderDate           DateTime     @default(now()) @map(name: "order_date")
  brand               String
  model               String
  serialNumber        String       @map(name: "serial_number")
  color               String
  imei                String?
  operation           Operation
  currentDamages      String?      @map(name: "current_damages")
  issue               String
  elementsLeft        String?      @map(name: "elements_left")
  password            String?
  objectType          ObjectType   @map(name: "object_type")
  client              Client       @relation(fields: [clientId], references: [id])
  clientId            String
  @@map(name: "orders")
}

enum DocumentType {
  NIF
  NIE
  DRIVING_LICENSE
  PASSPORT
  ID_CARD
  OTHER
}

enum Sex {
  MALE
  FEMALE
}

enum Operation {
  REPAIR
  MAINTENANCE
  INSTALLATION
  DATA_RECOVERY
  OTHER
}

enum ObjectType {
  DESKTOP
  LAPTOP
  AIO
  SMARTPHONE
  TABLET
  SMARTWATCH
  GPS
  OTHER
}